import{S as a,i as t,s as e,e as s,c as n,a as l,d as r,b as c,f as i,g as o,n as u,w as d,h as p,t as h,j as f,k as m,l as v,m as g,o as w,p as _,q as b,r as E,u as y,v as D,x as $,y as k,z as j,A as I,B as O}from"./client.6ce3f24e.js";function V(a){let t,e,d,p,h,f,m,v,g;return{c(){t=s("div"),e=s("div"),d=s("div"),p=s("div"),h=s("div"),f=s("div"),m=s("div"),v=s("div"),g=s("div"),this.h()},l(a){t=n(a,"DIV",{class:!0});var s=l(t);e=n(s,"DIV",{class:!0}),l(e).forEach(r),d=n(s,"DIV",{class:!0}),l(d).forEach(r),p=n(s,"DIV",{class:!0}),l(p).forEach(r),h=n(s,"DIV",{class:!0}),l(h).forEach(r),f=n(s,"DIV",{class:!0}),l(f).forEach(r),m=n(s,"DIV",{class:!0}),l(m).forEach(r),v=n(s,"DIV",{class:!0}),l(v).forEach(r),g=n(s,"DIV",{class:!0}),l(g).forEach(r),s.forEach(r),this.h()},h(){c(e,"class","svelte-7k6qu0"),c(d,"class","svelte-7k6qu0"),c(p,"class","svelte-7k6qu0"),c(h,"class","svelte-7k6qu0"),c(f,"class","svelte-7k6qu0"),c(m,"class","svelte-7k6qu0"),c(v,"class","svelte-7k6qu0"),c(g,"class","svelte-7k6qu0"),c(t,"class","lds-roller svelte-7k6qu0")},m(a,s){i(a,t,s),o(t,e),o(t,d),o(t,p),o(t,h),o(t,f),o(t,m),o(t,v),o(t,g)},p:u,i:u,o:u,d(a){a&&r(t)}}}class q extends a{constructor(a){super(),t(this,a,null,V,e,{})}}const P={updated:!1,updating:!0},x=d(Object.assign(Object.assign({},P),{available:!1,longitude:null,latitude:null,city:null})),T=d(Object.assign(Object.assign({},P),{available:!1})),S=d(Object.assign({},P));function C(a,t=!1){let e=t?{}:{updated:new Date};a.update((a=>Object.assign(Object.assign(Object.assign({},a),e),{updating:t})))}function M(a){let t,e,u,d,g=a[0].city+"";return{c(){t=s("i"),e=p(),u=s("h1"),d=h(g),this.h()},l(a){t=n(a,"I",{class:!0}),l(t).forEach(r),e=f(a),u=n(a,"H1",{class:!0});var s=l(u);d=m(s,g),s.forEach(r),this.h()},h(){c(t,"class","symbol fas fa-map-marker-alt svelte-9mqc59"),c(u,"class","svelte-9mqc59")},m(a,s){i(a,t,s),i(a,e,s),i(a,u,s),o(u,d)},p(a,t){1&t&&g!==(g=a[0].city+"")&&v(d,g)},d(a){a&&r(t),a&&r(e),a&&r(u)}}}function N(a){let t,e,c=a[1].updated.toLocaleString("no-NO",{dateStyle:"medium",timeStyle:"short"})+"";return{c(){t=s("p"),e=h(c)},l(a){t=n(a,"P",{});var s=l(t);e=m(s,c),s.forEach(r)},m(a,s){i(a,t,s),o(t,e)},p(a,t){2&t&&c!==(c=a[1].updated.toLocaleString("no-NO",{dateStyle:"medium",timeStyle:"short"})+"")&&v(e,c)},d(a){a&&r(t)}}}function z(a){let t,e;return{c(){t=s("p"),e=h("There is more than 10 minutes difference between data updates")},l(a){t=n(a,"P",{});var s=l(t);e=m(s,"There is more than 10 minutes difference between data updates"),s.forEach(r)},m(a,s){i(a,t,s),o(t,e)},p:u,d(a){a&&r(t)}}}function A(a){return{c:u,l:u,m:u,p:u,d:u}}function H(a){let t,e,d,g,w,_,b,E,y,D,$,k,j=a[2].now.kp+"",I=a[2].now.kp_max+"",O=a[2].now.kp_min+"";return{c(){t=s("h2"),e=h("KP "),d=h(j),g=p(),w=s("p"),_=s("span"),b=h("↑ KP "),E=h(I),y=p(),D=s("span"),$=h("↓ KP "),k=h(O),this.h()},l(a){t=n(a,"H2",{class:!0});var s=l(t);e=m(s,"KP "),d=m(s,j),s.forEach(r),g=f(a),w=n(a,"P",{});var c=l(w);_=n(c,"SPAN",{classname:!0});var i=l(_);b=m(i,"↑ KP "),E=m(i,I),i.forEach(r),y=f(c),D=n(c,"SPAN",{classname:!0});var o=l(D);$=m(o,"↓ KP "),k=m(o,O),o.forEach(r),c.forEach(r),this.h()},h(){c(t,"class","svelte-9mqc59"),c(_,"classname","pr-2"),c(D,"classname","pl-2")},m(a,s){i(a,t,s),o(t,e),o(t,d),i(a,g,s),i(a,w,s),o(w,_),o(_,b),o(_,E),o(w,y),o(w,D),o(D,$),o(D,k)},p(a,t){4&t&&j!==(j=a[2].now.kp+"")&&v(d,j),4&t&&I!==(I=a[2].now.kp_max+"")&&v(E,I),4&t&&O!==(O=a[2].now.kp_min+"")&&v(k,O)},i:u,o:u,d(a){a&&r(t),a&&r(g),a&&r(w)}}}function K(a){let t,e;return t=new q({}),{c(){D(t.$$.fragment)},l(a){$(t.$$.fragment,a)},m(a,s){k(t,a,s),e=!0},p:u,i(a){e||(E(t.$$.fragment,a),e=!0)},o(a){_(t.$$.fragment,a),e=!1},d(a){j(t,a)}}}function B(a){let t,e,u,d,w,_,b,E,y=a[2].now.bz+"",D=a[1].available&&J(a);return{c(){t=s("div"),e=s("p"),u=h("BZ"),d=p(),w=s("p"),_=h(y),b=p(),D&&D.c(),E=g(),this.h()},l(a){t=n(a,"DIV",{});var s=l(t);e=n(s,"P",{class:!0});var c=l(e);u=m(c,"BZ"),c.forEach(r),d=f(s),w=n(s,"P",{class:!0});var i=l(w);_=m(i,y),i.forEach(r),s.forEach(r),b=f(a),D&&D.l(a),E=g(),this.h()},h(){c(e,"class","svelte-9mqc59"),c(w,"class","svelte-9mqc59")},m(a,s){i(a,t,s),o(t,e),o(e,u),o(t,d),o(t,w),o(w,_),i(a,b,s),D&&D.m(a,s),i(a,E,s)},p(a,t){4&t&&y!==(y=a[2].now.bz+"")&&v(_,y),a[1].available?D?D.p(a,t):(D=J(a),D.c(),D.m(E.parentNode,E)):D&&(D.d(1),D=null)},d(a){a&&r(t),a&&r(b),D&&D.d(a),a&&r(E)}}}function J(a){let t,e,u,d,g,w,_,b,E,y,D,$,k,j,I,O=a[1].now.temp+"",V=a[1].now.clouds+"";return{c(){t=s("div"),e=s("p"),u=h("Temp"),d=p(),g=s("p"),w=h(O),_=h("°C"),b=p(),E=s("div"),y=s("p"),D=h("Clouds"),$=p(),k=s("p"),j=h(V),I=h("%"),this.h()},l(a){t=n(a,"DIV",{});var s=l(t);e=n(s,"P",{class:!0});var c=l(e);u=m(c,"Temp"),c.forEach(r),d=f(s),g=n(s,"P",{class:!0});var i=l(g);w=m(i,O),_=m(i,"°C"),i.forEach(r),s.forEach(r),b=f(a),E=n(a,"DIV",{});var o=l(E);y=n(o,"P",{class:!0});var p=l(y);D=m(p,"Clouds"),p.forEach(r),$=f(o),k=n(o,"P",{class:!0});var h=l(k);j=m(h,V),I=m(h,"%"),h.forEach(r),o.forEach(r),this.h()},h(){c(e,"class","svelte-9mqc59"),c(g,"class","svelte-9mqc59"),c(y,"class","svelte-9mqc59"),c(k,"class","svelte-9mqc59")},m(a,s){i(a,t,s),o(t,e),o(e,u),o(t,d),o(t,g),o(g,w),o(g,_),i(a,b,s),i(a,E,s),o(E,y),o(y,D),o(E,$),o(E,k),o(k,j),o(k,I)},p(a,t){2&t&&O!==(O=a[1].now.temp+"")&&v(w,O),2&t&&V!==(V=a[1].now.clouds+"")&&v(j,V)},d(a){a&&r(t),a&&r(b),a&&r(E)}}}function L(a){let t,e,u,d,h,m,v,g,y,D,$,k,j,I=!a[0].updating&&a[0].available&&M(a);function O(a,t){return 6&t&&(m=null),a[1].updating||a[2].updating?A:(null==m&&(m=!!(Math.abs(a[1].updated-a[2].updated)>6e5)),m?z:N)}let V=O(a,-1),q=V(a);const P=[K,H],x=[];function T(a,t){return a[2].updating||a[1].updating?0:1}y=T(a),D=x[y]=P[y](a);let S=!a[2].updating&&!a[1].updating&&B(a);return{c(){t=s("div"),e=s("div"),u=s("div"),I&&I.c(),d=p(),h=s("div"),q.c(),v=p(),g=s("div"),D.c(),$=p(),k=s("div"),S&&S.c(),this.h()},l(a){t=n(a,"DIV",{class:!0});var s=l(t);e=n(s,"DIV",{class:!0});var c=l(e);u=n(c,"DIV",{class:!0});var i=l(u);I&&I.l(i),i.forEach(r),d=f(c),h=n(c,"DIV",{class:!0});var o=l(h);q.l(o),o.forEach(r),v=f(c),g=n(c,"DIV",{class:!0});var p=l(g);D.l(p),p.forEach(r),$=f(c),k=n(c,"DIV",{class:!0});var m=l(k);S&&S.l(m),m.forEach(r),c.forEach(r),s.forEach(r),this.h()},h(){c(u,"class","weatherCurrent-data-location svelte-9mqc59"),c(h,"class","weatherCurrent-data-date"),c(g,"class","weatherCurrent-data-kp svelte-9mqc59"),c(k,"class","current-details svelte-9mqc59"),c(e,"class","weatherCurrent-data svelte-9mqc59"),c(t,"class","weatherCurrent-wrapper svelte-9mqc59")},m(a,s){i(a,t,s),o(t,e),o(e,u),I&&I.m(u,null),o(e,d),o(e,h),q.m(h,null),o(e,v),o(e,g),x[y].m(g,null),o(e,$),o(e,k),S&&S.m(k,null),j=!0},p(a,[t]){!a[0].updating&&a[0].available?I?I.p(a,t):(I=M(a),I.c(),I.m(u,null)):I&&(I.d(1),I=null),V===(V=O(a,t))&&q?q.p(a,t):(q.d(1),q=V(a),q&&(q.c(),q.m(h,null)));let e=y;y=T(a),y===e?x[y].p(a,t):(w(),_(x[e],1,1,(()=>{x[e]=null})),b(),D=x[y],D?D.p(a,t):(D=x[y]=P[y](a),D.c()),E(D,1),D.m(g,null)),a[2].updating||a[1].updating?S&&(S.d(1),S=null):S?S.p(a,t):(S=B(a),S.c(),S.m(k,null))},i(a){j||(E(D),j=!0)},o(a){_(D),j=!1},d(a){a&&r(t),I&&I.d(),q.d(),x[y].d(),S&&S.d()}}}function U(a,t,e){let s,n,l;return y(a,x,(a=>e(0,s=a))),y(a,T,(a=>e(1,n=a))),y(a,S,(a=>e(2,l=a))),[s,n,l]}!async function(){if("undefined"==typeof window)return;let a;C(x,!0);try{a=await async function(){return new Promise(((a,t)=>{"undefined"!=typeof navigator?navigator.geolocation.getCurrentPosition((t=>{a({longitude:t.coords.longitude,latitude:t.coords.latitude})}),(a=>{t(a)})):t(Error())}))}()}catch(a){return console.log(a),x.update((a=>Object.assign(Object.assign({},a),{available:!1,city:null,longitude:null,latitude:null}))),void C(x,!1)}let t=await fetch(`https://geocode.xyz/${a.latitude},${a.longitude}?geoit=json`),e=await t.json();x.update((t=>Object.assign(Object.assign(Object.assign({},t),{available:!0,city:e.city}),a))),C(x,!1)}(),x.subscribe((async function(a=null){if("undefined"==typeof window)return;if(null===a)return;if(a.updating)return;if(!a.available)return T.update((a=>Object.assign(Object.assign({},a),{available:!1}))),void C(T,!1);C(T,!0);let t=await fetch(`https://api.met.no/weatherapi/locationforecast/2.0/compact?lat=${a.latitude}&lon=${a.longitude}`),e=await t.json(),s={clouds:null,temp:null};try{s.clouds=e.properties.timeseries[0].data.instant.details.cloud_area_fraction,s.temp=e.properties.timeseries[0].data.instant.details.air_temperature,e.properties.timeseries=e.properties.timeseries.map((a=>Object.assign(Object.assign({},a),{time:new Date(a.time)})))}catch(a){}T.update((a=>Object.assign(Object.assign({},a),{yr_data_raw:e,now:s,available:!0}))),C(T,!1)})),async function(){if("undefined"==typeof window)return;C(S,!0);let a=await async function(){let a={now:{bz:"-",kp:"-",kp_min:"-",kp_max:"-"},usnoaa_data_raw:{solar_wind_mag_field:!1,noaa_planetary_k_index_forecast:!1}},t=await fetch("https://services.swpc.noaa.gov/products/summary/solar-wind-mag-field.json");a.usnoaa_data_raw.solar_wind_mag_field=await t.json(),a.usnoaa_data_raw.solar_wind_mag_field.TimeStamp=new Date(a.usnoaa_data_raw.solar_wind_mag_field.TimeStamp+" UTC"),a.now.bz=a.usnoaa_data_raw.solar_wind_mag_field.Bz,t=await fetch("https://services.swpc.noaa.gov/products/noaa-planetary-k-index-forecast.json"),a.usnoaa_data_raw.noaa_planetary_k_index_forecast=await t.json(),a.usnoaa_data_raw.noaa_planetary_k_index_forecast.shift();let e=new Date,s=new Date(0,0,0),n=1e3,l=0;return a.usnoaa_data_raw.noaa_planetary_k_index_forecast.forEach(((t,r)=>{t[1]>l&&(l=t[1]),t[1]<n&&(n=t[1]);let c=new Date(t[0]+" UTC");Math.abs(c.getTime()-e.getTime())<Math.abs(s.getTime()-e.getTime())&&(s=c,a.now.kp=t[1]),a.usnoaa_data_raw.noaa_planetary_k_index_forecast[r]={time:c,kp:t[1],observed:t[2]}})),a.now.kp_min=n.toString(),a.now.kp_max=l.toString(),a}();S.update((t=>Object.assign(Object.assign({},t),a))),C(S,!1)}();class Z extends a{constructor(a){super(),t(this,a,U,L,e,{})}}function F(a){let t,e,d,v,g,w,_,b,E,y,D,$,k=a[5]&&function(a){let t,e,d,v,g,w,_,b,E,y,D,$;return{c(){t=s("div"),e=s("p"),d=s("i"),v=p(),g=h(a[3]),w=h("°C"),_=p(),b=s("p"),E=s("i"),y=p(),D=h(a[4]),$=h("%"),this.h()},l(s){t=n(s,"DIV",{});var c=l(t);e=n(c,"P",{});var i=l(e);d=n(i,"I",{class:!0}),l(d).forEach(r),v=f(i),g=m(i,a[3]),w=m(i,"°C"),i.forEach(r),_=f(c),b=n(c,"P",{});var o=l(b);E=n(o,"I",{class:!0}),l(E).forEach(r),y=f(o),D=m(o,a[4]),$=m(o,"%"),o.forEach(r),c.forEach(r),this.h()},h(){c(d,"class","fas fa-thermometer-half"),c(E,"class","fas fa-cloud")},m(a,s){i(a,t,s),o(t,e),o(e,d),o(e,v),o(e,g),o(e,w),o(t,_),o(t,b),o(b,E),o(b,y),o(b,D),o(b,$)},p:u,d(a){a&&r(t)}}}(a);return{c(){t=s("div"),e=s("div"),d=s("h3"),v=h(a[2]),g=p(),w=s("p"),_=h(a[1]),b=p(),E=s("div"),y=s("h2"),D=h(a[0]),$=p(),k&&k.c(),this.h()},l(s){t=n(s,"DIV",{class:!0});var c=l(t);e=n(c,"DIV",{});var i=l(e);d=n(i,"H3",{class:!0});var o=l(d);v=m(o,a[2]),o.forEach(r),g=f(i),w=n(i,"P",{});var u=l(w);_=m(u,a[1]),u.forEach(r),i.forEach(r),b=f(c),E=n(c,"DIV",{class:!0});var p=l(E);y=n(p,"H2",{class:!0});var h=l(y);D=m(h,a[0]),h.forEach(r),$=f(p),k&&k.l(p),p.forEach(r),c.forEach(r),this.h()},h(){c(d,"class","svelte-u548p6"),c(y,"class","svelte-u548p6"),c(E,"class","data svelte-u548p6"),c(t,"class","prediction-details svelte-u548p6")},m(a,s){i(a,t,s),o(t,e),o(e,d),o(d,v),o(e,g),o(e,w),o(w,_),o(t,b),o(t,E),o(E,y),o(y,D),o(E,$),k&&k.m(E,null)},p(a,[t]){a[5]&&k.p(a,t)},i:u,o:u,d(a){a&&r(t),k&&k.d()}}}function G(a,t=2){let e=a;for(let s=0;s<t-a.length;s++)e="0"+e;return e}function Q(a,t,e){let{prediction:s}=t;let n=s.kp,l=s.time.getDate()+". "+["January","February","March","April","May","June","July","August","September","October","November","December"][s.time.getMonth()],r=G(s.time.getHours().toString())+":"+G(s.time.getMinutes().toString()),c=s.temp,i=s.clouds,o=s.hasNOMETData;return a.$$set=a=>{"prediction"in a&&e(6,s=a.prediction)},[n,l,r,c,i,o,s]}class R extends a{constructor(a){super(),t(this,a,Q,F,e,{prediction:6})}}function W(a,t,e){const s=a.slice();return s[5]=t[e],s[7]=e,s}function X(a){let t,e,d,v,g;return{c(){t=s("div"),e=s("i"),d=p(),v=s("p"),g=h("No prediction data"),this.h()},l(a){t=n(a,"DIV",{class:!0});var s=l(t);e=n(s,"I",{class:!0}),l(e).forEach(r),d=f(s),v=n(s,"P",{});var c=l(v);g=m(c,"No prediction data"),c.forEach(r),s.forEach(r),this.h()},h(){c(e,"class","fas fa-7x fa-exclamation-triangle"),c(t,"class","no-data svelte-1romtap")},m(a,s){i(a,t,s),o(t,e),o(t,d),o(t,v),o(v,g)},p:u,i:u,o:u,d(a){a&&r(t)}}}function Y(a){let t,e,u,d,v,g,y=a[0],D=[];for(let t=0;t<y.length;t+=1)D[t]=aa(W(a,y,t));const $=a=>_(D[a],1,1,(()=>{D[a]=null}));return{c(){t=s("div"),e=s("h2"),u=h("Predicted"),d=p(),v=s("div");for(let a=0;a<D.length;a+=1)D[a].c();this.h()},l(a){t=n(a,"DIV",{classname:!0});var s=l(t);e=n(s,"H2",{class:!0});var c=l(e);u=m(c,"Predicted"),c.forEach(r),s.forEach(r),d=f(a),v=n(a,"DIV",{class:!0});var i=l(v);for(let a=0;a<D.length;a+=1)D[a].l(i);i.forEach(r),this.h()},h(){c(e,"class","svelte-1romtap"),c(t,"classname","flex flex-row justify-between items-top"),c(v,"class","prediction-table svelte-1romtap")},m(a,s){i(a,t,s),o(t,e),o(e,u),i(a,d,s),i(a,v,s);for(let a=0;a<D.length;a+=1)D[a].m(v,null);g=!0},p(a,t){if(1&t){let e;for(y=a[0],e=0;e<y.length;e+=1){const s=W(a,y,e);D[e]?(D[e].p(s,t),E(D[e],1)):(D[e]=aa(s),D[e].c(),E(D[e],1),D[e].m(v,null))}for(w(),e=y.length;e<D.length;e+=1)$(e);b()}},i(a){if(!g){for(let a=0;a<y.length;a+=1)E(D[a]);g=!0}},o(a){D=D.filter(Boolean);for(let a=0;a<D.length;a+=1)_(D[a]);g=!1},d(a){a&&r(t),a&&r(d),a&&r(v),I(D,a)}}}function aa(a){let t,e;return t=new R({props:{prediction:a[5]}}),{c(){D(t.$$.fragment)},l(a){$(t.$$.fragment,a)},m(a,s){k(t,a,s),e=!0},p(a,e){const s={};1&e&&(s.prediction=a[5]),t.$set(s)},i(a){e||(E(t.$$.fragment,a),e=!0)},o(a){_(t.$$.fragment,a),e=!1},d(a){j(t,a)}}}function ta(a){let t,e,o,u;const d=[Y,X],p=[];function h(a,t){return a[0]?0:1}return e=h(a),o=p[e]=d[e](a),{c(){t=s("div"),o.c(),this.h()},l(a){t=n(a,"DIV",{class:!0});var e=l(t);o.l(e),e.forEach(r),this.h()},h(){c(t,"class","predicted-weather svelte-1romtap")},m(a,s){i(a,t,s),p[e].m(t,null),u=!0},p(a,[s]){let n=e;e=h(a),e===n?p[e].p(a,s):(w(),_(p[n],1,1,(()=>{p[n]=null})),b(),o=p[e],o?o.p(a,s):(o=p[e]=d[e](a),o.c()),E(o,1),o.m(t,null))},i(a){u||(E(o),u=!0)},o(a){_(o),u=!1},d(a){a&&r(t),p[e].d()}}}function ea(a,t,e){let s,n,l;async function r(){n.updating||s.updating?e(0,l=null):(e(0,l=n.usnoaa_data_raw.noaa_planetary_k_index_forecast.map((a=>({time:a.time,kp:a.kp,temp:null,clouds:null,hasNOMETData:s.available})))),s.available&&l.forEach(((a,t)=>{let n,r,c=new Date(0,0,0);s.yr_data_raw.properties.timeseries.forEach(((t,e)=>{let s=new Date(t.time);Math.abs(s.getTime()-a.time.getTime())<Math.abs(c.getTime()-a.time.getTime())&&(c=s,n=t.data.instant.details.air_temperature,r=t.data.instant.details.cloud_area_fraction)})),e(0,l[t]=Object.assign(Object.assign({},l[t]),{temp:n,clouds:r}),l)})))}return y(a,T,(a=>e(1,s=a))),y(a,S,(a=>e(2,n=a))),S.subscribe(r),T.subscribe(r),[l]}class sa extends a{constructor(a){super(),t(this,a,ea,ta,e,{})}}function na(a){let t,e,d,h,m,v;return d=new Z({}),m=new sa({}),{c(){t=p(),e=s("div"),D(d.$$.fragment),h=p(),D(m.$$.fragment),this.h()},l(a){O('[data-svelte="svelte-1q3846k"]',document.head).forEach(r),t=f(a),e=n(a,"DIV",{class:!0});var s=l(e);$(d.$$.fragment,s),h=f(s),$(m.$$.fragment,s),s.forEach(r),this.h()},h(){document.title="Aurora data",c(e,"class","homescreen svelte-pf4p6y")},m(a,s){i(a,t,s),i(a,e,s),k(d,e,null),o(e,h),k(m,e,null),v=!0},p:u,i(a){v||(E(d.$$.fragment,a),E(m.$$.fragment,a),v=!0)},o(a){_(d.$$.fragment,a),_(m.$$.fragment,a),v=!1},d(a){a&&r(t),a&&r(e),j(d),j(m)}}}class la extends a{constructor(a){super(),t(this,a,null,na,e,{})}}export{la as default};
