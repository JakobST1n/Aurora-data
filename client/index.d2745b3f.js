import{S as t,i as a,s as e,e as s,a as r,t as n,c,b as o,d as i,f as l,g as h,h as u,j as f,k as v,l as d,n as p,o as m,m as g,p as E,q as w,r as y,u as $,v as D,w as b,x as P,y as I,z as V}from"./client.2977978b.js";function x(t){let a,e,m,g,E,w,y,$,D,b,P,I,V,x,N,T,M,j,_,k,A,S,H,J,K,B,O,q,z,F,Z,G,L,Q,R,U,W,X,Y,tt,at,et,st,rt,nt,ct,ot,it,lt;return{c(){a=s("div"),e=s("div"),m=s("div"),g=s("i"),E=r(),w=s("h1"),y=n(C),$=r(),D=s("div"),b=s("p"),P=n(t[0]),I=r(),V=s("div"),x=s("h2"),N=n("KP "),T=n(t[1]),M=r(),j=s("p"),_=s("span"),k=n("↑ KP "),A=n(t[3]),S=r(),H=s("span"),J=n("↓ KP "),K=n(t[2]),B=r(),O=s("div"),q=s("div"),z=s("p"),F=n("BZ"),Z=r(),G=s("p"),L=n(t[4]),Q=r(),R=s("div"),U=s("p"),W=n("Temp"),X=r(),Y=s("p"),tt=n(t[6]),at=n("°C"),et=r(),st=s("div"),rt=s("p"),nt=n("Clouds"),ct=r(),ot=s("p"),it=n(t[5]),lt=n("%"),this.h()},l(s){a=c(s,"DIV",{class:!0});var r=o(a);e=c(r,"DIV",{class:!0});var n=o(e);m=c(n,"DIV",{class:!0});var u=o(m);g=c(u,"I",{class:!0}),o(g).forEach(i),E=l(u),w=c(u,"H1",{class:!0});var f=o(w);y=h(f,C),f.forEach(i),u.forEach(i),$=l(n),D=c(n,"DIV",{class:!0});var v=o(D);b=c(v,"P",{});var d=o(b);P=h(d,t[0]),d.forEach(i),v.forEach(i),I=l(n),V=c(n,"DIV",{class:!0});var p=o(V);x=c(p,"H2",{class:!0});var ht=o(x);N=h(ht,"KP "),T=h(ht,t[1]),ht.forEach(i),M=l(p),j=c(p,"P",{});var ut=o(j);_=c(ut,"SPAN",{className:!0});var ft=o(_);k=h(ft,"↑ KP "),A=h(ft,t[3]),ft.forEach(i),S=l(ut),H=c(ut,"SPAN",{className:!0});var vt=o(H);J=h(vt,"↓ KP "),K=h(vt,t[2]),vt.forEach(i),ut.forEach(i),p.forEach(i),B=l(n),O=c(n,"DIV",{class:!0});var dt=o(O);q=c(dt,"DIV",{});var pt=o(q);z=c(pt,"P",{class:!0});var mt=o(z);F=h(mt,"BZ"),mt.forEach(i),Z=l(pt),G=c(pt,"P",{class:!0});var gt=o(G);L=h(gt,t[4]),gt.forEach(i),pt.forEach(i),Q=l(dt),R=c(dt,"DIV",{});var Et=o(R);U=c(Et,"P",{class:!0});var wt=o(U);W=h(wt,"Temp"),wt.forEach(i),X=l(Et),Y=c(Et,"P",{class:!0});var yt=o(Y);tt=h(yt,t[6]),at=h(yt,"°C"),yt.forEach(i),Et.forEach(i),et=l(dt),st=c(dt,"DIV",{});var $t=o(st);rt=c($t,"P",{class:!0});var Dt=o(rt);nt=h(Dt,"Clouds"),Dt.forEach(i),ct=l($t),ot=c($t,"P",{class:!0});var bt=o(ot);it=h(bt,t[5]),lt=h(bt,"%"),bt.forEach(i),$t.forEach(i),dt.forEach(i),n.forEach(i),r.forEach(i),this.h()},h(){u(g,"class","symbol fas fa-map-marker-alt svelte-13muhi2"),u(w,"class","svelte-13muhi2"),u(m,"class","weatherCurrent-data-location svelte-13muhi2"),u(D,"class","weatherCurrent-data-date"),u(x,"class","svelte-13muhi2"),u(_,"classname","pr-2"),u(H,"classname","pl-2"),u(V,"class","weatherCurrent-data-kp svelte-13muhi2"),u(z,"class","svelte-13muhi2"),u(G,"class","svelte-13muhi2"),u(U,"class","svelte-13muhi2"),u(Y,"class","svelte-13muhi2"),u(rt,"class","svelte-13muhi2"),u(ot,"class","svelte-13muhi2"),u(O,"class","current-details svelte-13muhi2"),u(e,"class","weatherCurrent-data svelte-13muhi2"),u(a,"class","weatherCurrent-wrapper svelte-13muhi2")},m(t,s){f(t,a,s),v(a,e),v(e,m),v(m,g),v(m,E),v(m,w),v(w,y),v(e,$),v(e,D),v(D,b),v(b,P),v(e,I),v(e,V),v(V,x),v(x,N),v(x,T),v(V,M),v(V,j),v(j,_),v(_,k),v(_,A),v(j,S),v(j,H),v(H,J),v(H,K),v(e,B),v(e,O),v(O,q),v(q,z),v(z,F),v(q,Z),v(q,G),v(G,L),v(O,Q),v(O,R),v(R,U),v(U,W),v(R,X),v(R,Y),v(Y,tt),v(Y,at),v(O,et),v(O,st),v(st,rt),v(rt,nt),v(st,ct),v(st,ot),v(ot,it),v(ot,lt)},p(t,[a]){1&a&&d(P,t[0]),2&a&&d(T,t[1]),8&a&&d(A,t[3]),4&a&&d(K,t[2]),16&a&&d(L,t[4]),64&a&&d(tt,t[6]),32&a&&d(it,t[5])},i:p,o:p,d(t){t&&i(a)}}}let C="The earth";function N(t,a,e){var s=this&&this.__awaiter||function(t,a,e,s){return new(e||(e=Promise))((function(r,n){function c(t){try{i(s.next(t))}catch(t){n(t)}}function o(t){try{i(s.throw(t))}catch(t){n(t)}}function i(t){var a;t.done?r(t.value):(a=t.value,a instanceof e?a:new e((function(t){t(a)}))).then(c,o)}i((s=s.apply(t,a||[])).next())}))};const r=["January","February","March","April","May","June","July","August","September","October","November","December"];let n,c,o="-",i="-",l="-",h="-",u="-",f="-",v="-";function d(t){n=t.coords.longitude,c=t.coords.latitude,function(t,a){s(this,void 0,void 0,(function*(){let s=yield fetch(`https://api.met.no/weatherapi/locationforecast/2.0/compact?lat=${a}&lon=${t}`).then((t=>t.json()));e(5,f=s.properties.timeseries[0].data.instant.details.cloud_area_fraction),e(6,v=s.properties.timeseries[0].data.instant.details.air_temperature)}))}(n,c)}function p(t){g()}function g(){n=28.283333,c=-15.416667}return m((function(){!function(){s(this,void 0,void 0,(function*(){e(4,u=(yield fetch("https://services.swpc.noaa.gov/products/summary/solar-wind-mag-field.json").then((t=>t.json()))).Bz);let t=yield fetch("https://services.swpc.noaa.gov/products/noaa-planetary-k-index-forecast.json").then((t=>t.json()));t.shift();let a=new Date,s=new Date(0,0,0),n=1e3,c=0;t.forEach(((t,r)=>{t[1]>c&&(c=t[1]),t[1]<n&&(n=t[1]);let o=new Date(t[0]);Math.abs(o.getTime()-a.getTime())<Math.abs(s.getTime()-a.getTime())&&(s=o,e(1,i=t[1]))})),e(2,l=n.toString()),e(3,h=c.toString()),e(0,o=s.getDay()+". "+r[s.getMonth()]+" "+s.getHours()+":"+s.getMinutes())}))}(),navigator.geolocation?navigator.geolocation.getCurrentPosition(d,p):g()})),[o,i,l,h,u,f,v]}class T extends t{constructor(t){super(),a(this,t,N,x,e,{})}}function M(t){let a,e,d,m,g,E,w,y,$,D,b,P,I=t[5]&&function(t){let a,e,d,m,g,E,w,y,$,D,b,P;return{c(){a=s("div"),e=s("p"),d=s("i"),m=r(),g=n(t[3]),E=n("°C"),w=r(),y=s("p"),$=s("i"),D=r(),b=n(t[4]),P=n("%"),this.h()},l(s){a=c(s,"DIV",{});var r=o(a);e=c(r,"P",{});var n=o(e);d=c(n,"I",{class:!0}),o(d).forEach(i),m=l(n),g=h(n,t[3]),E=h(n,"°C"),n.forEach(i),w=l(r),y=c(r,"P",{});var u=o(y);$=c(u,"I",{class:!0}),o($).forEach(i),D=l(u),b=h(u,t[4]),P=h(u,"%"),u.forEach(i),r.forEach(i),this.h()},h(){u(d,"class","fas fa-thermometer-half"),u($,"class","fas fa-cloud")},m(t,s){f(t,a,s),v(a,e),v(e,d),v(e,m),v(e,g),v(e,E),v(a,w),v(a,y),v(y,$),v(y,D),v(y,b),v(y,P)},p:p,d(t){t&&i(a)}}}(t);return{c(){a=s("div"),e=s("div"),d=s("h3"),m=n(t[2]),g=r(),E=s("p"),w=n(t[1]),y=r(),$=s("div"),D=s("h2"),b=n(t[0]),P=r(),I&&I.c(),this.h()},l(s){a=c(s,"DIV",{class:!0});var r=o(a);e=c(r,"DIV",{});var n=o(e);d=c(n,"H3",{class:!0});var u=o(d);m=h(u,t[2]),u.forEach(i),g=l(n),E=c(n,"P",{});var f=o(E);w=h(f,t[1]),f.forEach(i),n.forEach(i),y=l(r),$=c(r,"DIV",{class:!0});var v=o($);D=c(v,"H2",{class:!0});var p=o(D);b=h(p,t[0]),p.forEach(i),P=l(v),I&&I.l(v),v.forEach(i),r.forEach(i),this.h()},h(){u(d,"class","svelte-u548p6"),u(D,"class","svelte-u548p6"),u($,"class","data svelte-u548p6"),u(a,"class","prediction-details svelte-u548p6")},m(t,s){f(t,a,s),v(a,e),v(e,d),v(d,m),v(e,g),v(e,E),v(E,w),v(a,y),v(a,$),v($,D),v(D,b),v($,P),I&&I.m($,null)},p(t,[a]){t[5]&&I.p(t,a)},i:p,o:p,d(t){t&&i(a),I&&I.d()}}}function j(t,a,e){let{prediction:s}=a;let r=s.kp,n=s.time.split(" "),c=Number(n[0].split("-")[2])+". "+["January","February","March","April","May","June","July","August","September","October","November","December"][Number(n[0].split("-")[1])],o=n[1].substring(0,5),i=s.temp,l=s.clouds,h=s.hasNOMETData;return t.$$set=t=>{"prediction"in t&&e(6,s=t.prediction)},[r,c,o,i,l,h,s]}class _ extends t{constructor(t){super(),a(this,t,j,M,e,{prediction:6})}}function k(t,a,e){const s=t.slice();return s[13]=a[e],s[15]=e,s}function A(t){let a,e,d,m,g;return{c(){a=s("div"),e=s("i"),d=r(),m=s("p"),g=n("No prediction data"),this.h()},l(t){a=c(t,"DIV",{class:!0});var s=o(a);e=c(s,"I",{class:!0}),o(e).forEach(i),d=l(s),m=c(s,"P",{});var r=o(m);g=h(r,"No prediction data"),r.forEach(i),s.forEach(i),this.h()},h(){u(e,"class","fas fa-7x fa-exclamation-triangle"),u(a,"class","no-data svelte-bhvysr")},m(t,s){f(t,a,s),v(a,e),v(a,d),v(a,m),v(m,g)},p:p,i:p,o:p,d(t){t&&i(a)}}}function S(t){let a,e,d,p,m,$,D=t[0],b=[];for(let a=0;a<D.length;a+=1)b[a]=H(k(t,D,a));const P=t=>E(b[t],1,1,(()=>{b[t]=null}));return{c(){a=s("div"),e=s("h2"),d=n("Predicted"),p=r(),m=s("div");for(let t=0;t<b.length;t+=1)b[t].c();this.h()},l(t){a=c(t,"DIV",{className:!0});var s=o(a);e=c(s,"H2",{class:!0});var r=o(e);d=h(r,"Predicted"),r.forEach(i),s.forEach(i),p=l(t),m=c(t,"DIV",{class:!0});var n=o(m);for(let t=0;t<b.length;t+=1)b[t].l(n);n.forEach(i),this.h()},h(){u(e,"class","svelte-bhvysr"),u(a,"classname","flex flex-row justify-between items-top"),u(m,"class","prediction-table svelte-bhvysr")},m(t,s){f(t,a,s),v(a,e),v(e,d),f(t,p,s),f(t,m,s);for(let t=0;t<b.length;t+=1)b[t].m(m,null);$=!0},p(t,a){if(1&a){let e;for(D=t[0],e=0;e<D.length;e+=1){const s=k(t,D,e);b[e]?(b[e].p(s,a),y(b[e],1)):(b[e]=H(s),b[e].c(),y(b[e],1),b[e].m(m,null))}for(g(),e=D.length;e<b.length;e+=1)P(e);w()}},i(t){if(!$){for(let t=0;t<D.length;t+=1)y(b[t]);$=!0}},o(t){b=b.filter(Boolean);for(let t=0;t<b.length;t+=1)E(b[t]);$=!1},d(t){t&&i(a),t&&i(p),t&&i(m),I(b,t)}}}function H(t){let a,e;return a=new _({props:{prediction:t[13]}}),{c(){$(a.$$.fragment)},l(t){D(a.$$.fragment,t)},m(t,s){b(a,t,s),e=!0},p(t,e){const s={};1&e&&(s.prediction=t[13]),a.$set(s)},i(t){e||(y(a.$$.fragment,t),e=!0)},o(t){E(a.$$.fragment,t),e=!1},d(t){P(a,t)}}}function J(t){let a,e,r,n;const l=[S,A],h=[];function v(t,a){return t[0]?0:1}return e=v(t),r=h[e]=l[e](t),{c(){a=s("div"),r.c(),this.h()},l(t){a=c(t,"DIV",{class:!0});var e=o(a);r.l(e),e.forEach(i),this.h()},h(){u(a,"class","predicted-weather svelte-bhvysr")},m(t,s){f(t,a,s),h[e].m(a,null),n=!0},p(t,[s]){let n=e;e=v(t),e===n?h[e].p(t,s):(g(),E(h[n],1,1,(()=>{h[n]=null})),w(),r=h[e],r||(r=h[e]=l[e](t),r.c()),y(r,1),r.m(a,null))},i(t){n||(y(r),n=!0)},o(t){E(r),n=!1},d(t){t&&i(a),h[e].d()}}}function K(t,a,e){var s=this&&this.__awaiter||function(t,a,e,s){return new(e||(e=Promise))((function(r,n){function c(t){try{i(s.next(t))}catch(t){n(t)}}function o(t){try{i(s.throw(t))}catch(t){n(t)}}function i(t){var a;t.done?r(t.value):(a=t.value,a instanceof e?a:new e((function(t){t(a)}))).then(c,o)}i((s=s.apply(t,a||[])).next())}))};let r,n,c,o=!1;function i(t,a){return s(this,void 0,void 0,(function*(){let s;o&&(s=yield fetch(`https://api.met.no/weatherapi/locationforecast/2.0/compact?lat=${a}&lon=${t}`).then((t=>t.json())));let r=yield fetch("https://services.swpc.noaa.gov/products/noaa-planetary-k-index-forecast.json").then((t=>t.json()));r.shift();let n=[];r.forEach(((t,a)=>{if("observed"!=t[2]){let a,e,r=new Date(t[0]),c=new Date(0,0,0);o&&s.properties.timeseries.forEach(((t,s)=>{let n=new Date(t.time);Math.abs(n.getTime()-r.getTime())<Math.abs(c.getTime()-r.getTime())&&(c=n,a=t.data.instant.details.air_temperature,e=t.data.instant.details.cloud_area_fraction)})),n.push({time:t[0],kp:t[1],temp:a,clouds:e,hasNOMETData:o})}})),e(0,c=n)}))}function l(t){r=t.coords.longitude,n=t.coords.latitude,i(r,n)}function h(t){u()}function u(){r=28.283333,n=-15.416667,i(0,0)}return m((function(){navigator.geolocation?(o=!0,navigator.geolocation.getCurrentPosition(l,h)):(o=!1,u())})),[c]}class B extends t{constructor(t){super(),a(this,t,K,J,e,{})}}function O(t){let a,e,n,h,d,m;return n=new T({}),d=new B({}),{c(){a=r(),e=s("div"),$(n.$$.fragment),h=r(),$(d.$$.fragment),this.h()},l(t){V('[data-svelte="svelte-1q3846k"]',document.head).forEach(i),a=l(t),e=c(t,"DIV",{class:!0});var s=o(e);D(n.$$.fragment,s),h=l(s),D(d.$$.fragment,s),s.forEach(i),this.h()},h(){document.title="Aurora data",u(e,"class","homescreen svelte-pf4p6y")},m(t,s){f(t,a,s),f(t,e,s),b(n,e,null),v(e,h),b(d,e,null),m=!0},p:p,i(t){m||(y(n.$$.fragment,t),y(d.$$.fragment,t),m=!0)},o(t){E(n.$$.fragment,t),E(d.$$.fragment,t),m=!1},d(t){t&&i(a),t&&i(e),P(n),P(d)}}}export default class extends t{constructor(t){super(),a(this,t,null,O,e,{})}}
