import{S as a,i as e,s as t,e as s,c as l,a as n,d as r,b as c,f as i,g as o,n as d,w as u,h,t as p,j as f,k as m,l as v,m as g,o as _,p as w,q as b,r as $,u as E,v as k,x as D,y,z as I,A as j,B as V,C as O,D as x,E as P,F as T,G as M,H as S,I as C}from"./client.b9472371.js";function q(a){let e,t,u,h,p,f,m,v,g;return{c(){e=s("div"),t=s("div"),u=s("div"),h=s("div"),p=s("div"),f=s("div"),m=s("div"),v=s("div"),g=s("div"),this.h()},l(a){e=l(a,"DIV",{class:!0});var s=n(e);t=l(s,"DIV",{class:!0}),n(t).forEach(r),u=l(s,"DIV",{class:!0}),n(u).forEach(r),h=l(s,"DIV",{class:!0}),n(h).forEach(r),p=l(s,"DIV",{class:!0}),n(p).forEach(r),f=l(s,"DIV",{class:!0}),n(f).forEach(r),m=l(s,"DIV",{class:!0}),n(m).forEach(r),v=l(s,"DIV",{class:!0}),n(v).forEach(r),g=l(s,"DIV",{class:!0}),n(g).forEach(r),s.forEach(r),this.h()},h(){c(t,"class","svelte-7k6qu0"),c(u,"class","svelte-7k6qu0"),c(h,"class","svelte-7k6qu0"),c(p,"class","svelte-7k6qu0"),c(f,"class","svelte-7k6qu0"),c(m,"class","svelte-7k6qu0"),c(v,"class","svelte-7k6qu0"),c(g,"class","svelte-7k6qu0"),c(e,"class","lds-roller svelte-7k6qu0")},m(a,s){i(a,e,s),o(e,t),o(e,u),o(e,h),o(e,p),o(e,f),o(e,m),o(e,v),o(e,g)},p:d,i:d,o:d,d(a){a&&r(e)}}}class N extends a{constructor(a){super(),e(this,a,null,q,t,{})}}const H={updated:!1,updating:!0},B=u(Object.assign(Object.assign({},H),{available:!1,longitude:null,latitude:null,city:null})),A=u(Object.assign(Object.assign({},H),{available:!1})),z=u(Object.assign({},H));function J(a,e=!1){let t=e?{}:{updated:new Date};a.update((a=>Object.assign(Object.assign(Object.assign({},a),t),{updating:e})))}function K(a){let e,t,d,u,g=a[0].city+"";return{c(){e=s("i"),t=h(),d=s("h1"),u=p(g),this.h()},l(a){e=l(a,"I",{class:!0}),n(e).forEach(r),t=f(a),d=l(a,"H1",{class:!0});var s=n(d);u=m(s,g),s.forEach(r),this.h()},h(){c(e,"class","symbol fas fa-map-marker-alt svelte-9kdo4s"),c(d,"class","svelte-9kdo4s")},m(a,s){i(a,e,s),i(a,t,s),i(a,d,s),o(d,u)},p(a,e){1&e&&g!==(g=a[0].city+"")&&v(u,g)},d(a){a&&r(e),a&&r(t),a&&r(d)}}}function F(a){let e,t;function s(a,t){return 6&t&&(e=null),null==e&&(e=!!(Math.abs(a[1].updated-a[2].updated)>6e5)),e?U:L}let l=s(a,-1),n=l(a);return{c(){n.c(),t=g()},l(a){n.l(a),t=g()},m(a,e){n.m(a,e),i(a,t,e)},p(a,e){l===(l=s(a,e))&&n?n.p(a,e):(n.d(1),n=l(a),n&&(n.c(),n.m(t.parentNode,t)))},d(a){n.d(a),a&&r(t)}}}function L(a){let e,t,c=a[1].updated.toLocaleString("no-NO",{dateStyle:"medium",timeStyle:"short"})+"";return{c(){e=s("p"),t=p(c)},l(a){e=l(a,"P",{});var s=n(e);t=m(s,c),s.forEach(r)},m(a,s){i(a,e,s),o(e,t)},p(a,e){2&e&&c!==(c=a[1].updated.toLocaleString("no-NO",{dateStyle:"medium",timeStyle:"short"})+"")&&v(t,c)},d(a){a&&r(e)}}}function U(a){let e,t;return{c(){e=s("p"),t=p("There is more than 10 minutes difference between data updates")},l(a){e=l(a,"P",{});var s=n(e);t=m(s,"There is more than 10 minutes difference between data updates"),s.forEach(r)},m(a,s){i(a,e,s),o(e,t)},p:d,d(a){a&&r(e)}}}function Z(a){let e,t,u,g,_,w,b,$,E,k,D,y,I=a[2].now.kp+"",j=a[2].now.kp_max+"",V=a[2].now.kp_min+"";return{c(){e=s("h2"),t=p("KP "),u=p(I),g=h(),_=s("p"),w=s("span"),b=p("↑ KP "),$=p(j),E=h(),k=s("span"),D=p("↓ KP "),y=p(V),this.h()},l(a){e=l(a,"H2",{class:!0});var s=n(e);t=m(s,"KP "),u=m(s,I),s.forEach(r),g=f(a),_=l(a,"P",{});var c=n(_);w=l(c,"SPAN",{classname:!0});var i=n(w);b=m(i,"↑ KP "),$=m(i,j),i.forEach(r),E=f(c),k=l(c,"SPAN",{classname:!0});var o=n(k);D=m(o,"↓ KP "),y=m(o,V),o.forEach(r),c.forEach(r),this.h()},h(){c(e,"class","svelte-9kdo4s"),c(w,"classname","pr-2"),c(k,"classname","pl-2")},m(a,s){i(a,e,s),o(e,t),o(e,u),i(a,g,s),i(a,_,s),o(_,w),o(w,b),o(w,$),o(_,E),o(_,k),o(k,D),o(k,y)},p(a,e){4&e&&I!==(I=a[2].now.kp+"")&&v(u,I),4&e&&j!==(j=a[2].now.kp_max+"")&&v($,j),4&e&&V!==(V=a[2].now.kp_min+"")&&v(y,V)},i:d,o:d,d(a){a&&r(e),a&&r(g),a&&r(_)}}}function G(a){let e,t;return e=new N({}),{c(){k(e.$$.fragment)},l(a){D(e.$$.fragment,a)},m(a,s){y(e,a,s),t=!0},p:d,i(a){t||($(e.$$.fragment,a),t=!0)},o(a){w(e.$$.fragment,a),t=!1},d(a){I(e,a)}}}function Q(a){let e,t,d,u,_,w,b,$,E,k,D,y,I,j,V,O=a[2].now.bz+"",x=a[2].now.bt+"",P=a[1].available&&R(a);return{c(){e=s("div"),t=s("p"),d=p("BZ"),u=h(),_=s("p"),w=p(O),b=h(),$=s("div"),E=s("p"),k=p("BT"),D=h(),y=s("p"),I=p(x),j=h(),P&&P.c(),V=g(),this.h()},l(a){e=l(a,"DIV",{});var s=n(e);t=l(s,"P",{class:!0});var c=n(t);d=m(c,"BZ"),c.forEach(r),u=f(s),_=l(s,"P",{class:!0});var i=n(_);w=m(i,O),i.forEach(r),s.forEach(r),b=f(a),$=l(a,"DIV",{});var o=n($);E=l(o,"P",{class:!0});var h=n(E);k=m(h,"BT"),h.forEach(r),D=f(o),y=l(o,"P",{class:!0});var p=n(y);I=m(p,x),p.forEach(r),o.forEach(r),j=f(a),P&&P.l(a),V=g(),this.h()},h(){c(t,"class","svelte-9kdo4s"),c(_,"class","svelte-9kdo4s"),c(E,"class","svelte-9kdo4s"),c(y,"class","svelte-9kdo4s")},m(a,s){i(a,e,s),o(e,t),o(t,d),o(e,u),o(e,_),o(_,w),i(a,b,s),i(a,$,s),o($,E),o(E,k),o($,D),o($,y),o(y,I),i(a,j,s),P&&P.m(a,s),i(a,V,s)},p(a,e){4&e&&O!==(O=a[2].now.bz+"")&&v(w,O),4&e&&x!==(x=a[2].now.bt+"")&&v(I,x),a[1].available?P?P.p(a,e):(P=R(a),P.c(),P.m(V.parentNode,V)):P&&(P.d(1),P=null)},d(a){a&&r(e),a&&r(b),a&&r($),a&&r(j),P&&P.d(a),a&&r(V)}}}function R(a){let e,t,d,u,g,_,w,b,$,E,k,D,y,I,j,V=a[1].now.temp+"",O=a[1].now.clouds+"";return{c(){e=s("div"),t=s("p"),d=p("Temp"),u=h(),g=s("p"),_=p(V),w=p("°C"),b=h(),$=s("div"),E=s("p"),k=p("Clouds"),D=h(),y=s("p"),I=p(O),j=p("%"),this.h()},l(a){e=l(a,"DIV",{});var s=n(e);t=l(s,"P",{class:!0});var c=n(t);d=m(c,"Temp"),c.forEach(r),u=f(s),g=l(s,"P",{class:!0});var i=n(g);_=m(i,V),w=m(i,"°C"),i.forEach(r),s.forEach(r),b=f(a),$=l(a,"DIV",{});var o=n($);E=l(o,"P",{class:!0});var h=n(E);k=m(h,"Clouds"),h.forEach(r),D=f(o),y=l(o,"P",{class:!0});var p=n(y);I=m(p,O),j=m(p,"%"),p.forEach(r),o.forEach(r),this.h()},h(){c(t,"class","svelte-9kdo4s"),c(g,"class","svelte-9kdo4s"),c(E,"class","svelte-9kdo4s"),c(y,"class","svelte-9kdo4s")},m(a,s){i(a,e,s),o(e,t),o(t,d),o(e,u),o(e,g),o(g,_),o(g,w),i(a,b,s),i(a,$,s),o($,E),o(E,k),o($,D),o($,y),o(y,I),o(y,j)},p(a,e){2&e&&V!==(V=a[1].now.temp+"")&&v(_,V),2&e&&O!==(O=a[1].now.clouds+"")&&v(I,O)},d(a){a&&r(e),a&&r(b),a&&r($)}}}function W(a){let e,t,d,u,p,m,v,g,E,k,D,y,I=!a[0].updating&&a[0].available&&!a[1].updating&&!a[2].updating&&K(a),j=!a[1].updating&&!a[2].updating&&F(a);const V=[G,Z],O=[];function x(a,e){return a[2].updating||a[1].updating?0:1}g=x(a),E=O[g]=V[g](a);let P=!a[2].updating&&!a[1].updating&&Q(a);return{c(){e=s("div"),t=s("div"),d=s("div"),I&&I.c(),u=h(),p=s("div"),j&&j.c(),m=h(),v=s("div"),E.c(),k=h(),D=s("div"),P&&P.c(),this.h()},l(a){e=l(a,"DIV",{class:!0});var s=n(e);t=l(s,"DIV",{class:!0});var c=n(t);d=l(c,"DIV",{class:!0});var i=n(d);I&&I.l(i),i.forEach(r),u=f(c),p=l(c,"DIV",{class:!0});var o=n(p);j&&j.l(o),o.forEach(r),m=f(c),v=l(c,"DIV",{class:!0});var h=n(v);E.l(h),h.forEach(r),k=f(c),D=l(c,"DIV",{class:!0});var g=n(D);P&&P.l(g),g.forEach(r),c.forEach(r),s.forEach(r),this.h()},h(){c(d,"class","weatherCurrent-data-location svelte-9kdo4s"),c(p,"class","weatherCurrent-data-date"),c(v,"class","weatherCurrent-data-kp svelte-9kdo4s"),c(D,"class","current-details svelte-9kdo4s"),c(t,"class","weatherCurrent-data svelte-9kdo4s"),c(e,"class","weatherCurrent-wrapper svelte-9kdo4s")},m(a,s){i(a,e,s),o(e,t),o(t,d),I&&I.m(d,null),o(t,u),o(t,p),j&&j.m(p,null),o(t,m),o(t,v),O[g].m(v,null),o(t,k),o(t,D),P&&P.m(D,null),y=!0},p(a,[e]){a[0].updating||!a[0].available||a[1].updating||a[2].updating?I&&(I.d(1),I=null):I?I.p(a,e):(I=K(a),I.c(),I.m(d,null)),a[1].updating||a[2].updating?j&&(j.d(1),j=null):j?j.p(a,e):(j=F(a),j.c(),j.m(p,null));let t=g;g=x(a),g===t?O[g].p(a,e):(_(),w(O[t],1,1,(()=>{O[t]=null})),b(),E=O[g],E?E.p(a,e):(E=O[g]=V[g](a),E.c()),$(E,1),E.m(v,null)),a[2].updating||a[1].updating?P&&(P.d(1),P=null):P?P.p(a,e):(P=Q(a),P.c(),P.m(D,null))},i(a){y||($(E),y=!0)},o(a){w(E),y=!1},d(a){a&&r(e),I&&I.d(),j&&j.d(),O[g].d(),P&&P.d()}}}function X(a,e,t){let s,l,n;return E(a,B,(a=>t(0,s=a))),E(a,A,(a=>t(1,l=a))),E(a,z,(a=>t(2,n=a))),[s,l,n]}!async function(){if("undefined"==typeof window)return;let a;J(B,!0);try{a=await async function(){return new Promise(((a,e)=>{"undefined"!=typeof navigator?navigator.geolocation.getCurrentPosition((e=>{a({longitude:e.coords.longitude,latitude:e.coords.latitude})}),(a=>{e(a)})):e(Error())}))}()}catch(a){return console.log(a),B.update((a=>Object.assign(Object.assign({},a),{available:!1,city:null,longitude:null,latitude:null}))),void J(B,!1)}let e=await fetch(`https://geocode.xyz/${a.latitude},${a.longitude}?geoit=json`),t=await e.json();B.update((e=>Object.assign(Object.assign(Object.assign({},e),{available:!0,city:t.city}),a))),J(B,!1)}(),B.subscribe((async function(a=null){if("undefined"==typeof window)return;if(null===a)return;if(a.updating)return;if(!a.available)return A.update((a=>Object.assign(Object.assign({},a),{available:!1}))),void J(A,!1);J(A,!0);let e=await fetch(`https://api.met.no/weatherapi/locationforecast/2.0/compact?lat=${a.latitude}&lon=${a.longitude}`),t=await e.json(),s={clouds:null,temp:null};try{s.clouds=t.properties.timeseries[0].data.instant.details.cloud_area_fraction,s.temp=t.properties.timeseries[0].data.instant.details.air_temperature,t.properties.timeseries=t.properties.timeseries.map((a=>Object.assign(Object.assign({},a),{time:new Date(a.time)})))}catch(a){}A.update((a=>Object.assign(Object.assign({},a),{yr_data_raw:t,now:s,available:!0}))),J(A,!1)})),async function(){if("undefined"==typeof window)return;J(z,!0);let a=await async function(){let a={now:{bz:"-",bt:"-",kp:"-",kp_min:"-",kp_max:"-"},usnoaa_data_raw:{solar_wind_mag_field:!1,noaa_planetary_k_index_forecast:!1,geospace_pred_est_kp_1_hour:!1}},e=await fetch("https://services.swpc.noaa.gov/products/summary/solar-wind-mag-field.json");a.usnoaa_data_raw.solar_wind_mag_field=await e.json(),a.usnoaa_data_raw.solar_wind_mag_field.TimeStamp=new Date(a.usnoaa_data_raw.solar_wind_mag_field.TimeStamp+" UTC"),a.now.bz=a.usnoaa_data_raw.solar_wind_mag_field.Bz,a.now.bt=a.usnoaa_data_raw.solar_wind_mag_field.Bt,e=await fetch("https://services.swpc.noaa.gov/json/geospace/geospace_pred_est_kp_1_hour.json"),a.usnoaa_data_raw.geospace_pred_est_kp_1_hour=(await e.json()).map((a=>Object.assign(Object.assign({},a),{model_prediction_time:new Date(a.model_prediction_time)}))),e=await fetch("https://services.swpc.noaa.gov/products/noaa-planetary-k-index-forecast.json"),a.usnoaa_data_raw.noaa_planetary_k_index_forecast=await e.json(),a.usnoaa_data_raw.noaa_planetary_k_index_forecast.shift();let t=new Date,s=new Date(0,0,0),l=1e3,n=0;return a.usnoaa_data_raw.noaa_planetary_k_index_forecast.forEach(((e,r)=>{e[1]>n&&(n=e[1]),e[1]<l&&(l=e[1]);let c=new Date(e[0]+" UTC");Math.abs(c.getTime()-t.getTime())<Math.abs(s.getTime()-t.getTime())&&(s=c,a.now.kp=e[1]),a.usnoaa_data_raw.noaa_planetary_k_index_forecast[r]={time:c,kp:e[1],observed:e[2]}})),a.now.kp_min=l.toString(),a.now.kp_max=n.toString(),console.log(a),a}();z.update((e=>Object.assign(Object.assign({},e),a))),J(z,!1)}();class Y extends a{constructor(a){super(),e(this,a,X,W,t,{})}}function aa(a){let e,t;const o=a[1].default,d=j(o,a,a[0],null);return{c(){e=s("div"),d&&d.c(),this.h()},l(a){e=l(a,"DIV",{class:!0});var t=n(e);d&&d.l(t),t.forEach(r),this.h()},h(){c(e,"class","chip svelte-6dfxfp")},m(a,s){i(a,e,s),d&&d.m(e,null),t=!0},p(a,[e]){d&&d.p&&(!t||1&e)&&V(d,o,a,a[0],t?x(o,a[0],e,null):O(a[0]),null)},i(a){t||($(d,a),t=!0)},o(a){w(d,a),t=!1},d(a){a&&r(e),d&&d.d(a)}}}function ea(a,e,t){let{$$slots:s={},$$scope:l}=e;return a.$$set=a=>{"$$scope"in a&&t(0,l=a.$$scope)},[l,s]}class ta extends a{constructor(a){super(),e(this,a,ea,aa,t,{})}}function sa(a){let e,t,u,v,g,_,w,b,$,E,k,D,y=a[5]&&function(a){let e,t,u,v,g,_,w,b,$,E,k,D,y=Math.round(a[3])+"",I=Math.round(a[4])+"";return{c(){e=s("div"),t=s("p"),u=s("i"),v=h(),g=p(y),_=p("°C"),w=h(),b=s("p"),$=s("i"),E=h(),k=p(I),D=p("%"),this.h()},l(a){e=l(a,"DIV",{class:!0});var s=n(e);t=l(s,"P",{class:!0});var c=n(t);u=l(c,"I",{class:!0}),n(u).forEach(r),v=f(c),g=m(c,y),_=m(c,"°C"),c.forEach(r),w=f(s),b=l(s,"P",{class:!0});var i=n(b);$=l(i,"I",{class:!0}),n($).forEach(r),E=f(i),k=m(i,I),D=m(i,"%"),i.forEach(r),s.forEach(r),this.h()},h(){c(u,"class","fas fa-thermometer-half svelte-ghmp86"),c(t,"class","svelte-ghmp86"),c($,"class","fas fa-cloud svelte-ghmp86"),c(b,"class","svelte-ghmp86"),c(e,"class","svelte-ghmp86")},m(a,s){i(a,e,s),o(e,t),o(t,u),o(t,v),o(t,g),o(t,_),o(e,w),o(e,b),o(b,$),o(b,E),o(b,k),o(b,D)},p:d,d(a){a&&r(e)}}}(a);return{c(){e=s("div"),t=s("div"),u=s("h3"),v=p(a[2]),g=h(),_=s("p"),w=p(a[1]),b=h(),$=s("div"),E=s("h2"),k=p(a[0]),D=h(),y&&y.c(),this.h()},l(s){e=l(s,"DIV",{class:!0});var c=n(e);t=l(c,"DIV",{class:!0});var i=n(t);u=l(i,"H3",{class:!0});var o=n(u);v=m(o,a[2]),o.forEach(r),g=f(i),_=l(i,"P",{class:!0});var d=n(_);w=m(d,a[1]),d.forEach(r),i.forEach(r),b=f(c),$=l(c,"DIV",{class:!0});var h=n($);E=l(h,"H2",{class:!0});var p=n(E);k=m(p,a[0]),p.forEach(r),D=f(h),y&&y.l(h),h.forEach(r),c.forEach(r),this.h()},h(){c(u,"class","svelte-ghmp86"),c(_,"class","svelte-ghmp86"),c(t,"class","svelte-ghmp86"),c(E,"class","svelte-ghmp86"),c($,"class","data svelte-ghmp86"),c(e,"class","prediction-details svelte-ghmp86")},m(a,s){i(a,e,s),o(e,t),o(t,u),o(u,v),o(t,g),o(t,_),o(_,w),o(e,b),o(e,$),o($,E),o(E,k),o($,D),y&&y.m($,null)},p(a,[e]){a[5]&&y.p(a,e)},i:d,o:d,d(a){a&&r(e),y&&y.d()}}}function la(a,e=2){let t=a;for(let s=0;s<e-a.length;s++)t="0"+t;return t}function na(a,e,t){let{prediction:s}=e;let l=s.kp,n=s.time.getDate()+". "+["January","February","March","April","May","June","July","August","September","October","November","December"][s.time.getMonth()],r=la(s.time.getHours().toString())+":"+la(s.time.getMinutes().toString()),c=s.temp,i=s.clouds,o=s.hasNOMETData;return a.$$set=a=>{"prediction"in a&&t(6,s=a.prediction)},[l,n,r,c,i,o,s]}class ra extends a{constructor(a){super(),e(this,a,na,sa,t,{prediction:6})}}function ca(a,e,t){const s=a.slice();return s[5]=e[t],s[7]=t,s}function ia(a){let e,t;return e=new ra({props:{prediction:a[5]}}),{c(){k(e.$$.fragment)},l(a){D(e.$$.fragment,a)},m(a,s){y(e,a,s),t=!0},p(a,t){const s={};1&t&&(s.prediction=a[5]),e.$set(s)},i(a){t||($(e.$$.fragment,a),t=!0)},o(a){w(e.$$.fragment,a),t=!1},d(a){I(e,a)}}}function oa(a){let e,t,o=a[0],d=[];for(let e=0;e<o.length;e+=1)d[e]=ia(ca(a,o,e));const u=a=>w(d[a],1,1,(()=>{d[a]=null}));return{c(){e=s("div");for(let a=0;a<d.length;a+=1)d[a].c();this.h()},l(a){e=l(a,"DIV",{class:!0});var t=n(e);for(let a=0;a<d.length;a+=1)d[a].l(t);t.forEach(r),this.h()},h(){c(e,"class","prediction-table svelte-dqc8qx")},m(a,s){i(a,e,s);for(let a=0;a<d.length;a+=1)d[a].m(e,null);t=!0},p(a,[t]){if(1&t){let s;for(o=a[0],s=0;s<o.length;s+=1){const l=ca(a,o,s);d[s]?(d[s].p(l,t),$(d[s],1)):(d[s]=ia(l),d[s].c(),$(d[s],1),d[s].m(e,null))}for(_(),s=o.length;s<d.length;s+=1)u(s);b()}},i(a){if(!t){for(let a=0;a<o.length;a+=1)$(d[a]);t=!0}},o(a){d=d.filter(Boolean);for(let a=0;a<d.length;a+=1)w(d[a]);t=!1},d(a){a&&r(e),P(d,a)}}}function da(a,e,t){let s,l,n;async function r(){if(l.updating||s.updating)return void t(0,n=null);let a=l.usnoaa_data_raw.geospace_pred_est_kp_1_hour.filter((a=>a.model_prediction_time>=new Date));t(0,n=a.map((a=>({time:a.model_prediction_time,kp:Math.round(a.k),temp:null,clouds:null,hasNOMETData:s.available})))),s.available&&n.forEach(((a,e)=>{let l,r,c=new Date(0,0,0);s.yr_data_raw.properties.timeseries.forEach(((e,t)=>{let s=new Date(e.time);Math.abs(s.getTime()-a.time.getTime())<Math.abs(c.getTime()-a.time.getTime())&&(c=s,l=e.data.instant.details.air_temperature,r=e.data.instant.details.cloud_area_fraction)})),t(0,n[e]=Object.assign(Object.assign({},n[e]),{temp:l,clouds:r}),n)}))}return E(a,A,(a=>t(1,s=a))),E(a,z,(a=>t(2,l=a))),z.subscribe(r),A.subscribe(r),[n]}class ua extends a{constructor(a){super(),e(this,a,da,oa,t,{})}}function ha(a){let e,t,o;return t=new ta({props:{$$slots:{default:[pa]},$$scope:{ctx:a}}}),{c(){e=s("div"),k(t.$$.fragment),this.h()},l(a){e=l(a,"DIV",{class:!0});var s=n(e);D(t.$$.fragment,s),s.forEach(r),this.h()},h(){c(e,"class","svelte-ghmp86")},m(a,s){i(a,e,s),y(t,e,null),o=!0},p(a,e){const s={};257&e&&(s.$$scope={dirty:e,ctx:a}),t.$set(s)},i(a){o||($(t.$$.fragment,a),o=!0)},o(a){w(t.$$.fragment,a),o=!1},d(a){a&&r(e),I(t)}}}function pa(a){let e,t=a[0].observed+"";return{c(){e=p(t)},l(a){e=m(a,t)},m(a,t){i(a,e,t)},p(a,s){1&s&&t!==(t=a[0].observed+"")&&v(e,t)},d(a){a&&r(e)}}}function fa(a){let e,t,u,v,g,E,k,D,y,I,j,V,O,x,P="predicted"!=a[0].observed&&ha(a),T=a[6]&&function(a){let e,t,u,v,g,_,w,b,$,E,k,D,y=Math.round(a[4])+"",I=Math.round(a[5])+"";return{c(){e=s("div"),t=s("p"),u=s("i"),v=h(),g=p(y),_=p("°C"),w=h(),b=s("p"),$=s("i"),E=h(),k=p(I),D=p("%"),this.h()},l(a){e=l(a,"DIV",{class:!0});var s=n(e);t=l(s,"P",{class:!0});var c=n(t);u=l(c,"I",{class:!0}),n(u).forEach(r),v=f(c),g=m(c,y),_=m(c,"°C"),c.forEach(r),w=f(s),b=l(s,"P",{class:!0});var i=n(b);$=l(i,"I",{class:!0}),n($).forEach(r),E=f(i),k=m(i,I),D=m(i,"%"),i.forEach(r),s.forEach(r),this.h()},h(){c(u,"class","fas fa-thermometer-half svelte-ghmp86"),c(t,"class","svelte-ghmp86"),c($,"class","fas fa-cloud svelte-ghmp86"),c(b,"class","svelte-ghmp86"),c(e,"class","svelte-ghmp86")},m(a,s){i(a,e,s),o(e,t),o(t,u),o(t,v),o(t,g),o(t,_),o(e,w),o(e,b),o(b,$),o(b,E),o(b,k),o(b,D)},p:d,d(a){a&&r(e)}}}(a);return{c(){e=s("div"),t=s("div"),u=s("h3"),v=p(a[3]),g=h(),E=s("p"),k=p(a[2]),D=h(),P&&P.c(),y=h(),I=s("div"),j=s("h2"),V=p(a[1]),O=h(),T&&T.c(),this.h()},l(s){e=l(s,"DIV",{class:!0});var c=n(e);t=l(c,"DIV",{class:!0});var i=n(t);u=l(i,"H3",{class:!0});var o=n(u);v=m(o,a[3]),o.forEach(r),g=f(i),E=l(i,"P",{class:!0});var d=n(E);k=m(d,a[2]),d.forEach(r),i.forEach(r),D=f(c),P&&P.l(c),y=f(c),I=l(c,"DIV",{class:!0});var h=n(I);j=l(h,"H2",{class:!0});var p=n(j);V=m(p,a[1]),p.forEach(r),O=f(h),T&&T.l(h),h.forEach(r),c.forEach(r),this.h()},h(){c(u,"class","svelte-ghmp86"),c(E,"class","svelte-ghmp86"),c(t,"class","svelte-ghmp86"),c(j,"class","svelte-ghmp86"),c(I,"class","data svelte-ghmp86"),c(e,"class","prediction-details svelte-ghmp86")},m(a,s){i(a,e,s),o(e,t),o(t,u),o(u,v),o(t,g),o(t,E),o(E,k),o(e,D),P&&P.m(e,null),o(e,y),o(e,I),o(I,j),o(j,V),o(I,O),T&&T.m(I,null),x=!0},p(a,[t]){"predicted"!=a[0].observed?P?(P.p(a,t),1&t&&$(P,1)):(P=ha(a),P.c(),$(P,1),P.m(e,y)):P&&(_(),w(P,1,1,(()=>{P=null})),b()),a[6]&&T.p(a,t)},i(a){x||($(P),x=!0)},o(a){w(P),x=!1},d(a){a&&r(e),P&&P.d(),T&&T.d()}}}function ma(a,e=2){let t=a;for(let s=0;s<e-a.length;s++)t="0"+t;return t}function va(a,e,t){let{prediction:s}=e;let l=s.kp,n=s.time.getDate()+". "+["January","February","March","April","May","June","July","August","September","October","November","December"][s.time.getMonth()],r=ma(s.time.getHours().toString())+":"+ma(s.time.getMinutes().toString()),c=s.temp,i=s.clouds,o=s.hasNOMETData;return a.$$set=a=>{"prediction"in a&&t(0,s=a.prediction)},[s,l,n,r,c,i,o]}class ga extends a{constructor(a){super(),e(this,a,va,fa,t,{prediction:0})}}function _a(a,e,t){const s=a.slice();return s[5]=e[t],s[7]=t,s}function wa(a){let e,t;return e=new ga({props:{prediction:a[5]}}),{c(){k(e.$$.fragment)},l(a){D(e.$$.fragment,a)},m(a,s){y(e,a,s),t=!0},p(a,t){const s={};1&t&&(s.prediction=a[5]),e.$set(s)},i(a){t||($(e.$$.fragment,a),t=!0)},o(a){w(e.$$.fragment,a),t=!1},d(a){I(e,a)}}}function ba(a){let e,t,o=a[0],d=[];for(let e=0;e<o.length;e+=1)d[e]=wa(_a(a,o,e));const u=a=>w(d[a],1,1,(()=>{d[a]=null}));return{c(){e=s("div");for(let a=0;a<d.length;a+=1)d[a].c();this.h()},l(a){e=l(a,"DIV",{class:!0});var t=n(e);for(let a=0;a<d.length;a+=1)d[a].l(t);t.forEach(r),this.h()},h(){c(e,"class","prediction-table svelte-dqc8qx")},m(a,s){i(a,e,s);for(let a=0;a<d.length;a+=1)d[a].m(e,null);t=!0},p(a,[t]){if(1&t){let s;for(o=a[0],s=0;s<o.length;s+=1){const l=_a(a,o,s);d[s]?(d[s].p(l,t),$(d[s],1)):(d[s]=wa(l),d[s].c(),$(d[s],1),d[s].m(e,null))}for(_(),s=o.length;s<d.length;s+=1)u(s);b()}},i(a){if(!t){for(let a=0;a<o.length;a+=1)$(d[a]);t=!0}},o(a){d=d.filter(Boolean);for(let a=0;a<d.length;a+=1)w(d[a]);t=!1},d(a){a&&r(e),P(d,a)}}}function $a(a,e,t){let s,l,n;async function r(){if(l.updating||s.updating)return void t(0,n=null);let a=l.usnoaa_data_raw.noaa_planetary_k_index_forecast.filter((a=>"observed"!==a.observed));t(0,n=a.map((a=>({time:a.time,kp:a.kp,observed:a.observed,temp:null,clouds:null,hasNOMETData:s.available})))),s.available&&n.forEach(((a,e)=>{let l,r,c=new Date(0,0,0);s.yr_data_raw.properties.timeseries.forEach(((e,t)=>{let s=new Date(e.time);Math.abs(s.getTime()-a.time.getTime())<Math.abs(c.getTime()-a.time.getTime())&&(c=s,l=e.data.instant.details.air_temperature,r=e.data.instant.details.cloud_area_fraction)})),t(0,n[e]=Object.assign(Object.assign({},n[e]),{temp:l,clouds:r}),n)}))}return E(a,A,(a=>t(1,s=a))),E(a,z,(a=>t(2,l=a))),z.subscribe(r),A.subscribe(r),[n]}class Ea extends a{constructor(a){super(),e(this,a,$a,ba,t,{})}}function ka(a){let e,t,u,v,g;return{c(){e=s("div"),t=s("i"),u=h(),v=s("p"),g=p("No prediction data"),this.h()},l(a){e=l(a,"DIV",{class:!0});var s=n(e);t=l(s,"I",{class:!0}),n(t).forEach(r),u=f(s),v=l(s,"P",{});var c=n(v);g=m(c,"No prediction data"),c.forEach(r),s.forEach(r),this.h()},h(){c(t,"class","fas fa-7x fa-exclamation-triangle"),c(e,"class","no-data svelte-6c4yca")},m(a,s){i(a,e,s),o(e,t),o(e,u),o(e,v),o(v,g)},p:d,i:d,o:d,d(a){a&&r(e)}}}function Da(a){let e,t,d,u,v,E,j,V,O,x,P,C,q,N,H,B;var A=a[0];return A&&(C=new A({})),{c(){e=s("div"),t=s("h2"),d=p("Forecast"),u=h(),v=s("div"),E=s("div"),j=p("hour"),V=h(),O=s("div"),x=p("3 day"),P=h(),C&&k(C.$$.fragment),q=g(),this.h()},l(a){e=l(a,"DIV",{class:!0});var s=n(e);t=l(s,"H2",{class:!0});var c=n(t);d=m(c,"Forecast"),c.forEach(r),u=f(s),v=l(s,"DIV",{class:!0});var i=n(v);E=l(i,"DIV",{class:!0});var o=n(E);j=m(o,"hour"),o.forEach(r),V=f(i),O=l(i,"DIV",{class:!0});var h=n(O);x=m(h,"3 day"),h.forEach(r),i.forEach(r),s.forEach(r),P=f(a),C&&D(C.$$.fragment,a),q=g(),this.h()},h(){c(t,"class","svelte-6c4yca"),c(E,"class","svelte-6c4yca"),T(E,"selected",a[0]==ua),c(O,"class","svelte-6c4yca"),T(O,"selected",a[0]==Ea),c(v,"class","version-picker svelte-6c4yca"),c(e,"class","header svelte-6c4yca")},m(s,l){i(s,e,l),o(e,t),o(t,d),o(e,u),o(e,v),o(v,E),o(E,j),o(v,V),o(v,O),o(O,x),i(s,P,l),C&&y(C,s,l),i(s,q,l),N=!0,H||(B=[M(E,"click",a[3]),M(O,"click",a[4])],H=!0)},p(a,e){if(1&e&&T(E,"selected",a[0]==ua),1&e&&T(O,"selected",a[0]==Ea),A!==(A=a[0])){if(C){_();const a=C;w(a.$$.fragment,1,0,(()=>{I(a,1)})),b()}A?(C=new A({}),k(C.$$.fragment),$(C.$$.fragment,1),y(C,q.parentNode,q)):C=null}},i(a){N||(C&&$(C.$$.fragment,a),N=!0)},o(a){C&&w(C.$$.fragment,a),N=!1},d(a){a&&r(e),a&&r(P),a&&r(q),C&&I(C,a),H=!1,S(B)}}}function ya(a){let e,t,o,d;const u=[Da,ka],h=[];function p(a,e){return a[1].updating||a[2].updating?1:0}return t=p(a),o=h[t]=u[t](a),{c(){e=s("div"),o.c(),this.h()},l(a){e=l(a,"DIV",{class:!0});var t=n(e);o.l(t),t.forEach(r),this.h()},h(){c(e,"class","drawer svelte-6c4yca")},m(a,s){i(a,e,s),h[t].m(e,null),d=!0},p(a,[s]){let l=t;t=p(a),t===l?h[t].p(a,s):(_(),w(h[l],1,1,(()=>{h[l]=null})),b(),o=h[t],o?o.p(a,s):(o=h[t]=u[t](a),o.c()),$(o,1),o.m(e,null))},i(a){d||($(o),d=!0)},o(a){w(o),d=!1},d(a){a&&r(e),h[t].d()}}}function Ia(a,e,t){let s,l;E(a,A,(a=>t(1,s=a))),E(a,z,(a=>t(2,l=a)));let n=Ea;return[n,s,l,()=>t(0,n=ua),()=>t(0,n=Ea)]}class ja extends a{constructor(a){super(),e(this,a,Ia,ya,t,{})}}function Va(a){let e,t,u,p,m,v;return u=new Y({}),m=new ja({}),{c(){e=h(),t=s("div"),k(u.$$.fragment),p=h(),k(m.$$.fragment),this.h()},l(a){C('[data-svelte="svelte-1q3846k"]',document.head).forEach(r),e=f(a),t=l(a,"DIV",{class:!0});var s=n(t);D(u.$$.fragment,s),p=f(s),D(m.$$.fragment,s),s.forEach(r),this.h()},h(){document.title="Aurora data",c(t,"class","homescreen svelte-pf4p6y")},m(a,s){i(a,e,s),i(a,t,s),y(u,t,null),o(t,p),y(m,t,null),v=!0},p:d,i(a){v||($(u.$$.fragment,a),$(m.$$.fragment,a),v=!0)},o(a){w(u.$$.fragment,a),w(m.$$.fragment,a),v=!1},d(a){a&&r(e),a&&r(t),I(u),I(m)}}}class Oa extends a{constructor(a){super(),e(this,a,null,Va,t,{})}}export{Oa as default};
